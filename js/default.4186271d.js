var Rs=Object.defineProperty,Ds=Object.defineProperties;var Ls=Object.getOwnPropertyDescriptors;var Nt=Object.getOwnPropertySymbols;var Os=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable;var It=(h,x,n)=>x in h?Rs(h,x,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[x]=n,dt=(h,x)=>{for(var n in x||(x={}))Os.call(x,n)&&It(h,n,x[n]);if(Nt)for(var n of Nt(x))Us.call(x,n)&&It(h,n,x[n]);return h},vt=(h,x)=>Ds(h,Ls(x));var B=(h,x,n)=>new Promise((H,e)=>{var d=r=>{try{y(n.next(r))}catch(l){e(l)}},t=r=>{try{y(n.throw(r))}catch(l){e(l)}},y=r=>r.done?H(r.value):Promise.resolve(r.value).then(d,t);y((n=n.apply(h,x)).next())});(function(){var h={95985:function(e,d,t){"use strict";var y=t(3688),r=t(21145),l=t(34651),D=t(81929),z=t(92965),N=t(43383),P=t(28555),X=t(38804),ct=t(44732),xt=t(43270),Es=t(60862),mt=t(35418),zs=t(49470),As=t(24838),Bs=t(34063),Ms=t(66693),Ws=t(82281),Fs=t(4607),Vs=t(99040),Hs=t(42164),Xs=t(80031),Ys=t(40736),$s=t(98859),Gs=t(16761),Js=t(48944),Ks=t(62715),Qs=t(28717),bs=t(74658),ws=t(30125),ks=t(32271),qs=t(80276),_s=t(28309),te=t(98723),se=t(60702),ee=t(49930),ne=t(76081),ae=t(73584),oe=t(50920),re=t(10429),le=t(31827),ie=t(5855),de=t(8584),ve=t(68215),ce=t(14429),xe=t(73927),me=t(74625),fe=t(68839),he=t(97864),ge=t(91609),ye=t(43777),je=t(76086),pe=t(56377),Ze=t(63681),Ce=t(6353),Ne=t(15010),Ie=t(63504),Se=t(88990),Pe=t(99944),ue=t(71809),Te=t(45707),Re=t(14905),De=t(15887),Le=t(90883),Oe=t(92754),Ue=t(22228),Ee=t(16243),ze=t(35802),Ae=t(44260),Be=t(2256),Me=t(24212),We=t(76642),Fe=t(32152),Ve=t(47262),He=t(55377),Xe=t(199),Ye=t(40160),$e=t(60262),Ge=t(32801),Je=t(68652),Ke=t(80706),Qe=t(62298),be=t(53350),we=t(13239),ke=t(95596),qe=t(58584),_e=t(4456),tn=t(43392),sn=t(86767),en=t(85717),nn=t(86731),an=t(50118),on=t(95187),rn=t(75737),ln=t(51360),dn=t(13335),vn=t(90592),cn=t(20700),xn=t(32649),mn=t(65257),fn=t(85081),hn=t(66875),gn=t(29413),yn=t(609),jn=t(22895),pn=t(24714),Zn=t(90843),Cn=t(36313),Nn=t(20106),In=t(63789),Sn=t(60419),Pn=t(62616),un=t(10142),Tn=t(56308),Rn=t(33358),Dn=t(94571),Ln=t(30148),On=t(18665),Un=t(13985),En=t(65689),zn=t(51704),An=t(45512),Bn=t(40608),Mn=t(47482),Wn=t(20911),Fn=t(32183),Vn=t(48585),Hn=t(26515),Xn=t(63018),Yn=t(15438),$n=t(7311),Gn=t(4924),Jn=t(23901),Kn=t(62074),Qn=t(96219),bn=t(93908),wn=t(89848),kn=t(20348),qn=t(7719),_n=t(17517),ta=t(99740),sa=t(51125),ea=t(58475),na=t(13983),aa=t(61410),oa=t(5037),ra=t(38141),la=t(65611),ia=t(78165),da=t(96086),va=t(66505),ca=t(256),xa=t(11743),ma=t(63904),fa=t(72159),ha=t(27814),ga=t(84217),ya=t(86327),ja=t(42075),pa=t(1845),Za=t(13436),Ca=t(6069),Na=t(33001),Ia=t(61306),Sa=t(29703),Pa=t(62015),ua=t(74797),Ta=t(25397),Ra=t(31949),Da=t(19020),La=t(1906),Oa=t(24569),Ua=t(43191),Ea=t(63700),s=t(4637),m=t(59496),St=t(87995),Y=t(58790),_=t(68677),tt=t(82541),$=t(65200),Pt=t(21066),I=t(9e4),ut=t(66473),ft=t(86704),G=t(69540),st=t(48657),ht=t(77085),Tt=t(8444),a={wrapper:"pages_wrapper__q0g3U",btn_line:"pages_btn_line__CxNlN",btn:"pages_btn__YFbyW",no_imgs:"pages_no_imgs__Xj6JO",imgs:"pages_imgs__eY0z6",imgs_box:"pages_imgs_box__NNAR8",imgs_box_box_sticky:"pages_imgs_box_box_sticky__icviI",imgs_preview:"pages_imgs_preview__1RXX0",preview:"pages_preview__SDksv",preview_loading:"pages_preview_loading__-3zOn",j_cropper:"pages_j_cropper__cRRS3",result:"pages_result__LVFbX",can_not_save:"pages_can_not_save__iPqIx",cropper_box:"pages_cropper_box__STbly",none:"pages_none__uMRLw",scroll_area:"pages_scroll_area__dVb0M",center_loading:"pages_center_loading__rVQNH",opera_bar:"pages_opera_bar__dYHCl",opera_bar_icon:"pages_opera_bar_icon__ETfyB",opera_bar_area:"pages_opera_bar_area__odPT2",opera_bar_btn:"pages_opera_bar_btn__V-Izq",opera_bar_direction_x:"pages_opera_bar_direction_x__otJ7L",opera_bar_direction_y:"pages_opera_bar_direction_y__hz9NZ",crop_title:"pages_crop_title__o4Ylk"},Rt=t(69708),Dt=t(46934),Lt=t(55883),Ot=t(64347);const Ut=c=>B(this,null,function*(){return new Promise((i,v)=>{const o=new Image;o.src=c,o.onload=()=>{i({width:o.width,height:o.height})},o.onerror=()=>{i({width:-1,height:-1})}})});var Et=t(61087),zt=t(84875),At=t.n(zt),Bt=t(11227),Mt=t(7700);const Wt=c=>{let{url:i,filename:v,type:o}=c;if(!(v!=null&&v.length)&&(o!=null&&o.length)&&o.includes("/")){const j=o.split("/")[1];v=`${(0,Mt.Z)("unknown_")}.${j==="jpeg"?"jpg":j}`}(0,Bt.saveAs)(i,v)},Ft=c=>B(this,null,function*(){const i=yield(yield fetch(c)).blob();return URL.createObjectURL(i)});var Vt=t(68288),Ht=t(65122),Xt=t(72266),Yt=t(74321),$t=t(76431),Gt=t(22232),Jt=t(77893),Kt=t(52851),Qt=t(47921),bt=t(74218),wt={footer:"Footer_footer__V8Lu+"};const kt=()=>(0,s.jsxs)("div",{className:wt.footer,children:[(0,s.jsx)("div",{children:"MIT Licensed | Copyright \xA9 2022"}),(0,s.jsx)("div",{children:"By fz6m"})]});var et={title:"Title_title__GtFh1",first:"Title_first__bANMo",desc:"Title_desc__WP2h1"};const qt=()=>(0,s.jsxs)("div",{className:et.title,children:[(0,s.jsx)("div",{className:et.first,children:"\u{1F430} USAGI"}),(0,s.jsx)("div",{className:et.desc,children:"avatar image cropper"})]});var _t=t(45095),M=t(138),u=t(40350),nt=t(55357),ts=t(63891),ss=t(62046),es=t(74664),ns=t(42210),as=t(57589);const gt=600,yt=gt,os=15,rs=c=>new Promise((i,v)=>{const o=new Image;o.src=c,o.crossOrigin="anonymous",o.onload=()=>{i(o)}});function ls(c){let{imageBase64:i}=c;const[v,o]=(0,m.useState)({color:"#c51515",width:os});return(0,s.jsxs)(cs,{children:[(0,s.jsx)(xs,{children:(0,s.jsxs)(nt.Z,{name:"add-circle-form",children:[(0,s.jsx)(nt.Z.Item,{label:"Color",children:(0,s.jsx)(ys,{value:v.color,onChange:j=>{o(T=>vt(dt({},T),{color:j}))}})}),(0,s.jsx)(nt.Z.Item,{label:"Width",children:(0,s.jsx)(ts.Z,{style:{width:"50%"},min:0,value:v.width,onChange:j=>{o(T=>vt(dt({},T),{width:j||0}))},step:1,precision:0})})]})}),(0,s.jsx)(is,{drawData:v,imageUrl:i})]})}function is(c){let{drawData:i,onDrawEnd:v,imageUrl:o}=c;const[j,T]=(0,m.useState)(!1),[p,K]=(0,m.useState)(""),C=()=>B(this,null,function*(){const S=yt,E=gt,W=Math.min(i.width,S/2);i.width>=S/2&&Y.Z.warning("Stroke width is too large");const Q=yt-W*2;let F=document.createElement("canvas");M.fabric.Object.prototype.selectable=!1;const f=new M.fabric.Canvas(F,{backgroundColor:"white",width:S,height:S}),Z=yield rs(o),A=S/Z.width,b=new M.fabric.Circle({radius:Q/2*(1/A)+1,originX:"center",originY:"center"}),w=new M.fabric.Image(Z,{clipPath:b});w.scale(A),f.add(w);const ot=new M.fabric.Circle({radius:(Q+W)/2,strokeWidth:W,stroke:i.color,fill:"transparent"});f.add(ot);const rt=f.getWidth(),k=f.getHeight(),lt=E/S;f.setZoom(lt),f.setWidth(rt*f.getZoom()),f.setHeight(k*f.getZoom());const L=f.toDataURL({width:E,height:E,format:"png"});v==null||v(L),K(L),F=null,f.dispose()}),at=(0,es.Z)(C,{wait:500});return(0,ns.Z)(()=>{try{T(!0),at.run()}finally{T(!1)}},[i,o]),!(p!=null&&p.length)||!(o!=null&&o.length)?(0,s.jsx)(vs,{children:(0,s.jsx)(G.Z,{loading:!0})}):(0,s.jsx)("div",{children:(0,s.jsx)(G.Z,{loading:j,children:(0,s.jsx)(ds,{children:(0,s.jsx)("img",{src:p,alt:"preview image"})})})})}const ds=u.ZP.div`
  width: 70%;
  padding-left: 10%;
  aspect-ratio: 1 / 1;
  /* border: 1px solid black; */

  > img {
    max-width: 100%;
  }
`,vs=u.ZP.div`
  width: 70%;
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
`,cs=u.ZP.div`
  padding: 20px;
  width: 60vw;
`,xs=u.ZP.div`
  display: flex;
  flex-direction: column;
`,ms=u.ZP.div`
  /* padding: 10px; */
  /* border-radius: 4px; */
  /* box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1); */
`,fs=u.ZP.div`
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
`,hs=u.ZP.div`
  padding-right: 10px;
  font-family: monospace;
  font-size: 15px;
`,jt=12,gs=u.ZP.div`
  background-color: ${c=>c.color};
  width: ${jt}px;
  height: ${jt}px;
  border-radius: 50%;
  margin-right: 10px;
  flex-shrink: 0;
`;function ys(c){let{value:i,onChange:v}=c;return(0,s.jsxs)(fs,{children:[(0,s.jsx)(gs,{color:i}),(0,s.jsx)(hs,{children:i}),(0,s.jsx)(ss.Z,{content:(0,s.jsx)(ms,{children:(0,s.jsx)(as.L_,{color:i,onChange:o=>{v(o)}})}),trigger:"click",children:(0,s.jsx)(I.Z,{shape:"round",size:"small",type:"dashed",children:"Select color"})})]})}const pt="calc(var(--base-view) * 0.9)",J=2,js=()=>{const[c,i]=(0,m.useState)(""),[v,o]=(0,m.useState)(!1),[j,T]=(0,m.useState)(),[p,K]=(0,m.useState)(""),[C,at]=(0,m.useState)(),[S,E]=(0,m.useState)(!1),[W,Q]=(0,m.useState)(!1),F=(0,m.useRef)(),f=(0,Et.Z)(F),Z=Boolean(c.length),[A,b]=(0,m.useState)(!1),w=g=>B(this,null,function*(){o(!0);try{const O=new Blob([g],{type:g.type}),R=URL.createObjectURL(O),U=yield Ut(R);if(U.width<=0||U.height<=0){Y.Z.error("Parse image error");return}const V=(0,Rt.Z)(f==null?void 0:f.width)?f.width/U.width*U.height:500;at({filename:g.name,type:g.type}),T(V),i(R)}catch(O){Y.Z.error("Load image process error")}finally{o(!1)}}),ot=()=>{i(""),o(!1),T(void 0),K(""),b(!1)},[rt,k]=(0,m.useState)(!1),lt=()=>{k(!0)},L=(0,m.useRef)(),Is=()=>{E(!0);try{const g=L==null?void 0:L.current,O=g==null?void 0:g.cropper,R=O==null?void 0:O.getCroppedCanvas().toDataURL(C==null?void 0:C.type,92);R!=null&&R.length&&K(R)}finally{E(!1)}},Ss=(0,m.useCallback)((0,Dt.Z)(Is,500),[]),Ps=()=>{S||E(!0),Ss()},q=g=>{let{x:O=0,y:R=0}=g;const U=L.current,V=U==null?void 0:U.cropper;if(V){var it;(it=V.move)===null||it===void 0||it.call(V,O,R)}},us=()=>B(this,null,function*(){Y.Z.info("Downloading...");const g=yield Ft(p);Wt({url:g,filename:C==null?void 0:C.filename,type:C==null?void 0:C.type})}),[Ts,Ct]=(0,m.useState)(!1);return(0,s.jsxs)("div",{style:{"--base-view":"calc(100vw - 40px - 10px)"},children:[(0,s.jsx)(qt,{}),(0,s.jsx)(_.Z,{}),(0,s.jsxs)("div",{className:a.wrapper,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(tt.Z.Title,{style:{marginTop:0},heading:6,children:"Upload Image"}),(0,s.jsxs)($.Z.Row,{className:a.btn_line,children:[(0,s.jsx)(Pt.Z,{accept:"image/jpeg,image/png,image/webp",multiple:!1,fileList:[],showUploadList:!1,action:"",customRequest:Lt.Z,beforeUpload:w,disabled:Z,className:a.btn,children:(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Vt.Z,{}),type:"primary",disabled:Z,children:"Select"})}),(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Ht.Z,{}),disabled:!Z,className:a.btn,onClick:ot,children:"Clear"}),(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Xt.Z,{}),onClick:lt,className:a.btn,disabled:!Z,loading:S,type:"secondary",status:"success",children:"Save"})]}),(0,s.jsx)(tt.Z.Title,{style:{marginTop:10},heading:6,children:"Advanced Operations"}),(0,s.jsx)($.Z.Row,{className:a.btn_line,children:(0,s.jsx)(I.Z,{type:"dashed",icon:(0,s.jsx)(Yt.Z,{}),onClick:()=>{Ct(!0)},disabled:!Z,children:"Add circle"})}),(0,s.jsx)(_.Z,{}),(0,s.jsx)(tt.Z.Title,{heading:6,className:a.crop_title,children:"Crop Image"}),(0,s.jsx)("div",{style:{width:pt},ref:F}),(0,s.jsx)($.Z.Row,{className:a.imgs,style:{display:j?void 0:"none",userSelect:"none"},children:(0,s.jsx)(ut.Z,{offsetTop:0,onChange:Q,children:(0,s.jsx)("div",{className:At()(a.imgs_box,W&&a.imgs_box_sticky),children:!(p!=null&&p.length)&&Z?(0,s.jsxs)("div",{className:a.no_imgs,children:[(0,s.jsx)(ft.Z,{className:a.preview_loading,text:!1,image:{shape:"circle"},animation:!0}),(0,s.jsx)(ft.Z,{className:a.preview_loading,image:{shape:"circle"},text:!1,animation:!0})]}):(0,s.jsx)(G.Z,{loading:S,style:{display:"block"},children:(0,s.jsxs)("div",{className:a.imgs_preview,children:[(0,s.jsx)("div",{className:a.preview,style:{borderRadius:"50%"},children:(0,s.jsx)("img",{src:p})}),(0,s.jsx)("div",{className:a.preview,style:{borderRadius:13},children:(0,s.jsx)("img",{src:p})})]})})})})}),(0,s.jsx)($.Z.Row,{children:v?(0,s.jsx)(G.Z,{className:a.center_loading}):(0,s.jsx)("div",{style:{width:"100%"},children:j&&j>0?(0,s.jsxs)("div",{className:a.cropper_box,children:[(0,s.jsx)(Ot.Z,{src:c,style:{height:j,width:pt},aspectRatio:1/1,guides:!1,crop:Ps,ref:L,className:a.j_cropper}),(0,s.jsx)(st.Z,{showIcon:!1,className:a.scroll_area,content:"scroll area"})]}):(0,s.jsx)("div",{children:"Please select some one image"})})}),(0,s.jsx)(ht.Z,{visible:rt,title:"Croper Result",style:{width:"90%"},okText:"Close",maskClosable:!1,closable:!1,onOk:()=>{k(!1)},cancelButtonProps:{style:{display:"none"}},children:(0,s.jsxs)("div",{className:a.result,children:[(0,s.jsx)(st.Z,{type:"success",content:(0,s.jsx)("div",{children:"Please long press to save"}),style:{marginBottom:10}}),(0,s.jsx)("img",{src:p,alt:"cropper result",style:{width:"60%"}}),(0,s.jsx)(_.Z,{}),(0,s.jsx)(st.Z,{type:"warning",content:(0,s.jsxs)("div",{className:a.can_not_save,children:[(0,s.jsx)("div",{children:"Can't save? Try"}),(0,s.jsx)(Tt.Z,{style:{marginLeft:3},onClick:us,children:"Download"})]})})]})})]}),(0,s.jsx)(kt,{})]}),(0,s.jsxs)("div",{className:a.opera_bar,children:[(0,s.jsx)("div",{className:a.opera_bar_icon,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",onClick:()=>{b(g=>!g)},icon:A?(0,s.jsx)($t.Z,{}):(0,s.jsx)(Gt.Z,{})})}),(0,s.jsxs)(_t.E.div,{className:a.opera_bar_area,initial:{width:0,opacity:0},animate:{width:A?70:0,opacity:A?1:0,transition:{type:"just"}},children:[(0,s.jsx)("div",{className:a.opera_bar_direction_y,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Jt.Z,{}),onClick:()=>{q({y:-1*J})},disabled:!Z})}),(0,s.jsxs)("div",{className:a.opera_bar_direction_x,children:[(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Kt.Z,{}),disabled:!Z,onClick:()=>{q({x:-1*J})}}),(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Qt.Z,{}),disabled:!Z,onClick:()=>{q({x:J})}})]}),(0,s.jsx)("div",{className:a.opera_bar_direction_y,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(bt.Z,{}),disabled:!Z,onClick:()=>{q({y:J})}})})]})]}),(0,s.jsx)(ht.Z,{visible:Ts,style:{width:"90vw"},okButtonProps:{style:{display:"none"}},title:"Add Circle",escToExit:!1,maskClosable:!1,closable:!1,onCancel:()=>{Ct(!1)},cancelText:"Close",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(ls,{imageBase64:p}),(0,s.jsx)(ps,{children:"Please long press to save the image to your album"})]})})]})},ps=u.zo.div`
  margin-top: 10px;
  width: 100%;
  text-align: center;
  color: blue;
`;var Zs=t(36168),Zt=t(97376);function Cs(){return(0,s.jsx)(Zs.VK,{children:(0,s.jsx)(Zt.Z5,{children:(0,s.jsx)(Zt.AW,{path:"/",element:(0,s.jsx)(js,{})})})})}var Ns=Cs,za=t(75766),Aa=t(91672),Ba=t(19634);St.render((0,s.jsx)(Ns,{}),document.getElementById("root"))},41001:function(){},35287:function(){},7396:function(){}},x={};function n(e){var d=x[e];if(d!==void 0)return d.exports;var t=x[e]={id:e,loaded:!1,exports:{}};return h[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}n.m=h,function(){var e=[];n.O=function(d,t,y,r){if(t){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[t,y,r];return}for(var D=1/0,l=0;l<e.length;l++){for(var t=e[l][0],y=e[l][1],r=e[l][2],z=!0,N=0;N<t.length;N++)(r&!1||D>=r)&&Object.keys(n.O).every(function(mt){return n.O[mt](t[N])})?t.splice(N--,1):(z=!1,r<D&&(D=r));if(z){e.splice(l--,1);var P=y();P!==void 0&&(d=P)}}return d}}(),function(){n.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(d,{a:d}),d}}(),function(){n.d=function(e,d){for(var t in d)n.o(d,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:d[t]})}}(),function(){n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window=="object")return window}}()}(),function(){n.o=function(e,d){return Object.prototype.hasOwnProperty.call(e,d)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={913:0};n.O.j=function(y){return e[y]===0};var d=function(y,r){var l=r[0],D=r[1],z=r[2],N,P,X=0;if(l.some(function(xt){return e[xt]!==0})){for(N in D)n.o(D,N)&&(n.m[N]=D[N]);if(z)var ct=z(n)}for(y&&y(r);X<l.length;X++)P=l[X],n.o(e,P)&&e[P]&&e[P][0](),e[P]=0;return n.O(ct)},t=self.webpackChunk_xn_sakina_usagi=self.webpackChunk_xn_sakina_usagi||[];t.forEach(d.bind(null,0)),t.push=d.bind(null,t.push.bind(t))}(),function(){n.nc=void 0}();var H=n.O(void 0,[194,426,461,114],function(){return n(95985)});H=n.O(H)})();
