var Rs=Object.defineProperty,Ls=Object.defineProperties;var Os=Object.getOwnPropertyDescriptors;var Nt=Object.getOwnPropertySymbols;var Us=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable;var It=(h,x,n)=>x in h?Rs(h,x,{enumerable:!0,configurable:!0,writable:!0,value:n}):h[x]=n,dt=(h,x)=>{for(var n in x||(x={}))Us.call(x,n)&&It(h,n,x[n]);if(Nt)for(var n of Nt(x))Es.call(x,n)&&It(h,n,x[n]);return h},vt=(h,x)=>Ls(h,Os(x));var B=(h,x,n)=>new Promise((H,e)=>{var d=r=>{try{y(n.next(r))}catch(l){e(l)}},t=r=>{try{y(n.throw(r))}catch(l){e(l)}},y=r=>r.done?H(r.value):Promise.resolve(r.value).then(d,t);y((n=n.apply(h,x)).next())});(function(){var h={43590:function(e,d,t){"use strict";var y=t(63904),r=t(35418),l=t(90843),R=t(92965),z=t(10429),N=t(98859),P=t(47262),X=t(21145),ct=t(68839),xt=t(73584),zs=t(5037),mt=t(60862),As=t(99740),Bs=t(6353),Ms=t(92754),Ws=t(34651),Fs=t(32271),Vs=t(45512),Hs=t(97864),Xs=t(62616),Ys=t(86327),$s=t(13239),Gs=t(47482),Js=t(45707),Ks=t(98723),Qs=t(55377),bs=t(62015),ws=t(4607),ks=t(43270),qs=t(1906),_s=t(32183),te=t(28717),se=t(10142),ee=t(24569),ne=t(4924),ae=t(43777),oe=t(80706),re=t(61306),le=t(20106),ie=t(43383),de=t(48585),ve=t(22228),ce=t(24838),xe=t(76081),me=t(18665),fe=t(99944),he=t(62298),ge=t(14429),ye=t(72159),je=t(15887),pe=t(30125),Ze=t(38141),Ce=t(66505),Ne=t(17517),Ie=t(51360),Se=t(32649),Pe=t(68215),ue=t(16243),Te=t(28309),De=t(1845),Re=t(58475),Le=t(58584),Oe=t(16761),Ue=t(95596),Ee=t(30148),ze=t(20700),Ae=t(13335),Be=t(76086),Me=t(42164),We=t(66693),Fe=t(90883),Ve=t(86731),He=t(22895),Xe=t(66875),Ye=t(99040),$e=t(19020),Ge=t(256),Je=t(63504),Ke=t(49470),Qe=t(31949),be=t(14905),we=t(48944),ke=t(63681),qe=t(56308),_e=t(50118),tn=t(15438),sn=t(4456),en=t(11743),nn=t(7719),an=t(7311),on=t(44732),rn=t(93908),ln=t(62074),dn=t(13436),vn=t(85717),cn=t(85081),xn=t(24714),mn=t(27814),fn=t(75737),hn=t(43392),gn=t(33358),yn=t(2256),jn=t(62715),pn=t(91609),Zn=t(31827),Cn=t(76642),Nn=t(40736),In=t(60262),Sn=t(95187),Pn=t(26515),un=t(63789),Tn=t(65689),Dn=t(42075),Rn=t(86767),Ln=t(3688),On=t(15010),Un=t(29703),En=t(89848),zn=t(44260),An=t(73927),Bn=t(90592),Mn=t(50920),Wn=t(6069),Fn=t(609),Vn=t(74797),Hn=t(32152),Xn=t(82281),Yn=t(74658),$n=t(32801),Gn=t(56377),Jn=t(5855),Kn=t(38804),Qn=t(88990),bn=t(40608),wn=t(49930),kn=t(23901),qn=t(60419),_n=t(96219),ta=t(63700),sa=t(51704),ea=t(96086),na=t(34063),aa=t(33001),oa=t(80031),ra=t(199),la=t(28555),ia=t(51125),da=t(63018),va=t(74625),ca=t(40160),xa=t(78165),ma=t(61410),fa=t(80276),ha=t(94571),ga=t(43191),ya=t(20348),ja=t(60702),pa=t(65257),Za=t(71809),Ca=t(8584),Na=t(29413),Ia=t(84217),Sa=t(13983),Pa=t(25397),ua=t(81929),Ta=t(36313),Da=t(53350),Ra=t(13985),La=t(68652),Oa=t(65611),Ua=t(20911),Ea=t(35802),za=t(24212),s=t(4637),m=t(59496),St=t(87995),Y=t(92138),_=t(20739),tt=t(40095),$=t(1502),Pt=t(1392),I=t(67208),ut=t(42507),ft=t(43752),G=t(90237),st=t(24660),ht=t(72551),Tt=t(41205),a={wrapper:"pages_wrapper__q0g3U",btn_line:"pages_btn_line__CxNlN",btn:"pages_btn__YFbyW",no_imgs:"pages_no_imgs__Xj6JO",imgs:"pages_imgs__eY0z6",imgs_box:"pages_imgs_box__NNAR8",imgs_box_box_sticky:"pages_imgs_box_box_sticky__icviI",imgs_preview:"pages_imgs_preview__1RXX0",preview:"pages_preview__SDksv",preview_loading:"pages_preview_loading__-3zOn",j_cropper:"pages_j_cropper__cRRS3",result:"pages_result__LVFbX",can_not_save:"pages_can_not_save__iPqIx",cropper_box:"pages_cropper_box__STbly",none:"pages_none__uMRLw",scroll_area:"pages_scroll_area__dVb0M",center_loading:"pages_center_loading__rVQNH",opera_bar:"pages_opera_bar__dYHCl",opera_bar_icon:"pages_opera_bar_icon__ETfyB",opera_bar_area:"pages_opera_bar_area__odPT2",opera_bar_btn:"pages_opera_bar_btn__V-Izq",opera_bar_direction_x:"pages_opera_bar_direction_x__otJ7L",opera_bar_direction_y:"pages_opera_bar_direction_y__hz9NZ",crop_title:"pages_crop_title__o4Ylk"},Dt=t(69708),Rt=t(46934),Lt=t(55883),Ot=t(64347);const Ut=c=>B(this,null,function*(){return new Promise((i,v)=>{const o=new Image;o.src=c,o.onload=()=>{i({width:o.width,height:o.height})},o.onerror=()=>{i({width:-1,height:-1})}})});var Et=t(61087),zt=t(84875),At=t.n(zt),Bt=t(11227),Mt=t(7700);const Wt=c=>{let{url:i,filename:v,type:o}=c;if(!(v!=null&&v.length)&&(o!=null&&o.length)&&o.includes("/")){const j=o.split("/")[1];v=`${(0,Mt.Z)("unknown_")}.${j==="jpeg"?"jpg":j}`}(0,Bt.saveAs)(i,v)},Ft=c=>B(this,null,function*(){const i=yield(yield fetch(c)).blob();return URL.createObjectURL(i)});var Vt=t(64345),Ht=t(71282),Xt=t(63019),Yt=t(29116),$t=t(78911),Gt=t(66719),Jt=t(13435),Kt=t(51798),Qt=t(95836),bt=t(73699),wt={footer:"Footer_footer__V8Lu+"};const kt=()=>(0,s.jsxs)("div",{className:wt.footer,children:[(0,s.jsx)("div",{children:"MIT Licensed | Copyright \xA9 2022"}),(0,s.jsx)("div",{children:"By fz6m"})]});var et={title:"Title_title__GtFh1",first:"Title_first__bANMo",desc:"Title_desc__WP2h1"};const qt=()=>(0,s.jsxs)("div",{className:et.title,children:[(0,s.jsx)("div",{className:et.first,children:"\u{1F430} USAGI"}),(0,s.jsx)("div",{className:et.desc,children:"avatar image cropper"})]});var _t=t(40126),M=t(138),u=t(49173),nt=t(19978),ts=t(14196),ss=t(49316),es=t(74664),ns=t(42210),as=t(79236);const gt=600,yt=gt,os=15,rs=c=>new Promise((i,v)=>{const o=new Image;o.src=c,o.crossOrigin="anonymous",o.onload=()=>{i(o)}});function ls(c){let{imageBase64:i}=c;const[v,o]=(0,m.useState)({color:"#c51515",width:os});return(0,s.jsxs)(cs,{children:[(0,s.jsx)(xs,{children:(0,s.jsxs)(nt.Z,{name:"add-circle-form",children:[(0,s.jsx)(nt.Z.Item,{label:"Color",children:(0,s.jsx)(ys,{value:v.color,onChange:j=>{o(T=>vt(dt({},T),{color:j}))}})}),(0,s.jsx)(nt.Z.Item,{label:"Width",children:(0,s.jsx)(ts.Z,{style:{width:"50%"},min:0,value:v.width,onChange:j=>{o(T=>vt(dt({},T),{width:j||0}))},step:1,precision:0})})]})}),(0,s.jsx)(is,{drawData:v,imageUrl:i})]})}function is(c){let{drawData:i,onDrawEnd:v,imageUrl:o}=c;const[j,T]=(0,m.useState)(!1),[p,K]=(0,m.useState)(""),C=()=>B(this,null,function*(){const S=yt,E=gt,W=Math.min(i.width,S/2);i.width>=S/2&&Y.Z.warning("Stroke width is too large");const Q=yt-W*2;let F=document.createElement("canvas");M.fabric.Object.prototype.selectable=!1;const f=new M.fabric.Canvas(F,{backgroundColor:"white",width:S,height:S}),Z=yield rs(o),A=S/Z.width,b=new M.fabric.Circle({radius:Q/2*(1/A)+1,originX:"center",originY:"center"}),w=new M.fabric.Image(Z,{clipPath:b});w.scale(A),f.add(w);const ot=new M.fabric.Circle({radius:(Q+W)/2,strokeWidth:W,stroke:i.color,fill:"transparent"});f.add(ot);const rt=f.getWidth(),k=f.getHeight(),lt=E/S;f.setZoom(lt),f.setWidth(rt*f.getZoom()),f.setHeight(k*f.getZoom());const L=f.toDataURL({width:E,height:E,format:"png"});v==null||v(L),K(L),F=null,f.dispose()}),at=(0,es.Z)(C,{wait:500});return(0,ns.Z)(()=>{try{T(!0),at.run()}finally{T(!1)}},[i,o]),!(p!=null&&p.length)||!(o!=null&&o.length)?(0,s.jsx)(vs,{children:(0,s.jsx)(G.Z,{loading:!0})}):(0,s.jsx)("div",{children:(0,s.jsx)(G.Z,{loading:j,children:(0,s.jsx)(ds,{children:(0,s.jsx)("img",{src:p,alt:"preview image"})})})})}const ds=u.ZP.div`
  width: 70%;
  padding-left: 10%;
  aspect-ratio: 1 / 1;
  /* border: 1px solid black; */

  > img {
    max-width: 100%;
  }
`,vs=u.ZP.div`
  width: 70%;
  aspect-ratio: 1 / 1;
  display: flex;
  align-items: center;
  justify-content: center;
`,cs=u.ZP.div`
  padding: 20px;
  width: 60vw;
`,xs=u.ZP.div`
  display: flex;
  flex-direction: column;
`,ms=u.ZP.div`
  /* padding: 10px; */
  /* border-radius: 4px; */
  /* box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1); */
`,fs=u.ZP.div`
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
`,hs=u.ZP.div`
  padding-right: 10px;
  font-family: monospace;
  font-size: 15px;
`,jt=12,gs=u.ZP.div`
  background-color: ${c=>c.color};
  width: ${jt}px;
  height: ${jt}px;
  border-radius: 50%;
  margin-right: 10px;
  flex-shrink: 0;
`;function ys(c){let{value:i,onChange:v}=c;return(0,s.jsxs)(fs,{children:[(0,s.jsx)(gs,{color:i}),(0,s.jsx)(hs,{children:i}),(0,s.jsx)(ss.Z,{content:(0,s.jsx)(ms,{children:(0,s.jsx)(as.L_,{color:i,onChange:o=>{v(o)}})}),trigger:"click",children:(0,s.jsx)(I.Z,{shape:"round",size:"small",type:"dashed",children:"Select color"})})]})}const pt="calc(var(--base-view) * 0.9)",J=2,js=()=>{const[c,i]=(0,m.useState)(""),[v,o]=(0,m.useState)(!1),[j,T]=(0,m.useState)(),[p,K]=(0,m.useState)(""),[C,at]=(0,m.useState)(),[S,E]=(0,m.useState)(!1),[W,Q]=(0,m.useState)(!1),F=(0,m.useRef)(),f=(0,Et.Z)(F),Z=Boolean(c.length),[A,b]=(0,m.useState)(!1),w=g=>B(this,null,function*(){o(!0);try{const O=new Blob([g],{type:g.type}),D=URL.createObjectURL(O),U=yield Ut(D);if(U.width<=0||U.height<=0){Y.Z.error("Parse image error");return}const V=(0,Dt.Z)(f==null?void 0:f.width)?f.width/U.width*U.height:500;at({filename:g.name,type:g.type}),T(V),i(D)}catch(O){Y.Z.error("Load image process error")}finally{o(!1)}}),ot=()=>{i(""),o(!1),T(void 0),K(""),b(!1)},[rt,k]=(0,m.useState)(!1),lt=()=>{k(!0)},L=(0,m.useRef)(),Ss=()=>{E(!0);try{const g=L==null?void 0:L.current,O=g==null?void 0:g.cropper,D=O==null?void 0:O.getCroppedCanvas().toDataURL(C==null?void 0:C.type,92);D!=null&&D.length&&K(D)}finally{E(!1)}},Ps=(0,m.useCallback)((0,Rt.Z)(Ss,500),[]),us=()=>{S||E(!0),Ps()},q=g=>{let{x:O=0,y:D=0}=g;const U=L.current,V=U==null?void 0:U.cropper;if(V){var it;(it=V.move)===null||it===void 0||it.call(V,O,D)}},Ts=()=>B(this,null,function*(){Y.Z.info("Downloading...");const g=yield Ft(p);Wt({url:g,filename:C==null?void 0:C.filename,type:C==null?void 0:C.type})}),[Ds,Ct]=(0,m.useState)(!1);return(0,s.jsxs)("div",{style:{"--base-view":"calc(100vw - 40px - 10px)"},children:[(0,s.jsx)(qt,{}),(0,s.jsx)(_.Z,{}),(0,s.jsxs)("div",{className:a.wrapper,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(tt.Z.Title,{style:{marginTop:0},heading:6,children:"Upload Image"}),(0,s.jsxs)($.Z.Row,{className:a.btn_line,children:[(0,s.jsx)(Pt.Z,{accept:"image/jpeg,image/png,image/webp",multiple:!1,fileList:[],showUploadList:!1,action:"",customRequest:Lt.Z,beforeUpload:w,disabled:Z,className:a.btn,children:(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Vt.Z,{}),type:"primary",disabled:Z,children:"Select"})}),(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Ht.Z,{}),disabled:!Z,className:a.btn,onClick:ot,children:"Clear"}),(0,s.jsx)(I.Z,{icon:(0,s.jsx)(Xt.Z,{}),onClick:lt,className:a.btn,disabled:!Z,loading:S,type:"secondary",status:"success",children:"Save"})]}),(0,s.jsx)(tt.Z.Title,{style:{marginTop:10},heading:6,children:"Advanced Operations"}),(0,s.jsx)($.Z.Row,{className:a.btn_line,children:(0,s.jsx)(I.Z,{type:"dashed",icon:(0,s.jsx)(Yt.Z,{}),onClick:()=>{Ct(!0)},disabled:!Z,children:"Add circle"})}),(0,s.jsx)(_.Z,{}),(0,s.jsx)(tt.Z.Title,{heading:6,className:a.crop_title,children:"Crop Image"}),(0,s.jsx)("div",{style:{width:pt},ref:F}),(0,s.jsx)($.Z.Row,{className:a.imgs,style:{display:j?void 0:"none",userSelect:"none"},children:(0,s.jsx)(ut.Z,{offsetTop:0,onChange:Q,children:(0,s.jsx)("div",{className:At()(a.imgs_box,W&&a.imgs_box_sticky),children:!(p!=null&&p.length)&&Z?(0,s.jsxs)("div",{className:a.no_imgs,children:[(0,s.jsx)(ft.Z,{className:a.preview_loading,text:!1,image:{shape:"circle"},animation:!0}),(0,s.jsx)(ft.Z,{className:a.preview_loading,image:{shape:"circle"},text:!1,animation:!0})]}):(0,s.jsx)(G.Z,{loading:S,style:{display:"block"},children:(0,s.jsxs)("div",{className:a.imgs_preview,children:[(0,s.jsx)("div",{className:a.preview,style:{borderRadius:"50%"},children:(0,s.jsx)("img",{src:p})}),(0,s.jsx)("div",{className:a.preview,style:{borderRadius:13},children:(0,s.jsx)("img",{src:p})})]})})})})}),(0,s.jsx)($.Z.Row,{children:v?(0,s.jsx)(G.Z,{className:a.center_loading}):(0,s.jsx)("div",{style:{width:"100%"},children:j&&j>0?(0,s.jsxs)("div",{className:a.cropper_box,children:[(0,s.jsx)(Ot.Z,{src:c,style:{height:j,width:pt},aspectRatio:1/1,guides:!1,crop:us,ref:L,className:a.j_cropper}),(0,s.jsx)(st.Z,{showIcon:!1,className:a.scroll_area,content:"scroll area"})]}):(0,s.jsx)("div",{children:"Please select some one image"})})}),(0,s.jsx)(ht.Z,{visible:rt,title:"Croper Result",style:{width:"90%"},okText:"Close",maskClosable:!1,closable:!1,onOk:()=>{k(!1)},cancelButtonProps:{style:{display:"none"}},children:(0,s.jsxs)("div",{className:a.result,children:[(0,s.jsx)(st.Z,{type:"success",content:(0,s.jsx)("div",{children:"Please long press to save"}),style:{marginBottom:10}}),(0,s.jsx)("img",{src:p,alt:"cropper result",style:{width:"60%"}}),(0,s.jsx)(_.Z,{}),(0,s.jsx)(st.Z,{type:"warning",content:(0,s.jsxs)("div",{className:a.can_not_save,children:[(0,s.jsx)("div",{children:"Can't save? Try"}),(0,s.jsx)(Tt.Z,{style:{marginLeft:3},onClick:Ts,children:"Download"})]})})]})})]}),(0,s.jsx)(kt,{})]}),(0,s.jsxs)("div",{className:a.opera_bar,children:[(0,s.jsx)("div",{className:a.opera_bar_icon,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",onClick:()=>{b(g=>!g)},icon:A?(0,s.jsx)($t.Z,{}):(0,s.jsx)(Gt.Z,{})})}),(0,s.jsxs)(_t.E.div,{className:a.opera_bar_area,initial:{width:0,opacity:0},animate:{width:A?70:0,opacity:A?1:0,transition:{type:"just"}},children:[(0,s.jsx)("div",{className:a.opera_bar_direction_y,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Jt.Z,{}),onClick:()=>{q({y:-1*J})},disabled:!Z})}),(0,s.jsxs)("div",{className:a.opera_bar_direction_x,children:[(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Kt.Z,{}),disabled:!Z,onClick:()=>{q({x:-1*J})}}),(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(Qt.Z,{}),disabled:!Z,onClick:()=>{q({x:J})}})]}),(0,s.jsx)("div",{className:a.opera_bar_direction_y,children:(0,s.jsx)(I.Z,{className:a.opera_bar_btn,type:"text",shape:"circle",size:"small",icon:(0,s.jsx)(bt.Z,{}),disabled:!Z,onClick:()=>{q({y:J})}})})]})]}),(0,s.jsx)(ht.Z,{visible:Ds,style:{width:"90vw"},okButtonProps:{style:{display:"none"}},title:"Add Circle",escToExit:!1,maskClosable:!1,closable:!1,onCancel:()=>{Ct(!1)},cancelText:"Close",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(ls,{imageBase64:p}),(0,s.jsx)(ps,{children:"Please long press to save the image to your album"})]})})]})},ps=u.zo.div`
  margin-top: 10px;
  width: 100%;
  text-align: center;
  color: blue;
`;var Zs=t(82746),Zt=t(97376);const Cs=!1;function Ns(){return(0,s.jsx)(Zs.VK,{basename:Cs?"/":"/usagi",children:(0,s.jsx)(Zt.Z5,{children:(0,s.jsx)(Zt.AW,{path:"/",element:(0,s.jsx)(js,{})})})})}var Is=Ns,Aa=t(60171),Ba=t(28433),Ma=t(86155);St.render((0,s.jsx)(Is,{}),document.getElementById("root"))},41001:function(){},35287:function(){},7396:function(){}},x={};function n(e){var d=x[e];if(d!==void 0)return d.exports;var t=x[e]={id:e,loaded:!1,exports:{}};return h[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}n.m=h,function(){var e=[];n.O=function(d,t,y,r){if(t){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[t,y,r];return}for(var R=1/0,l=0;l<e.length;l++){for(var t=e[l][0],y=e[l][1],r=e[l][2],z=!0,N=0;N<t.length;N++)(r&!1||R>=r)&&Object.keys(n.O).every(function(mt){return n.O[mt](t[N])})?t.splice(N--,1):(z=!1,r<R&&(R=r));if(z){e.splice(l--,1);var P=y();P!==void 0&&(d=P)}}return d}}(),function(){n.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(d,{a:d}),d}}(),function(){n.d=function(e,d){for(var t in d)n.o(d,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:d[t]})}}(),function(){n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window=="object")return window}}()}(),function(){n.o=function(e,d){return Object.prototype.hasOwnProperty.call(e,d)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={913:0};n.O.j=function(y){return e[y]===0};var d=function(y,r){var l=r[0],R=r[1],z=r[2],N,P,X=0;if(l.some(function(xt){return e[xt]!==0})){for(N in R)n.o(R,N)&&(n.m[N]=R[N]);if(z)var ct=z(n)}for(y&&y(r);X<l.length;X++)P=l[X],n.o(e,P)&&e[P]&&e[P][0](),e[P]=0;return n.O(ct)},t=self.webpackChunk_xn_sakina_usagi=self.webpackChunk_xn_sakina_usagi||[];t.forEach(d.bind(null,0)),t.push=d.bind(null,t.push.bind(t))}(),function(){n.nc=void 0}();var H=n.O(void 0,[194,426,461,114],function(){return n(43590)});H=n.O(H)})();
